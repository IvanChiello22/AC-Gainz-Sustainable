function genericFilter(){console.log("Calling genericFilter");let e=document.getElementById("tastes").value,t=document.getElementById("sorting").value,n=document.getElementById("weights").value,a=new URLSearchParams;e&&a.append("taste",e),t&&a.append("sorting",t),n&&a.append("weight",n);let l=`genericFilter?${a.toString()}`;fetch(l).then(e=>{if(!e.ok)throw Error();return e.text()}).then(e=>{updateView(e)}).catch(e=>{console.log(e)})}function updateView(e){let t=document.querySelector("#gr");t.innerHTML="";let n;try{n=JSON.parse(e)}catch(a){console.error("Error parsing JSON response:",a);return}n.forEach(e=>{let n=document.createElement("div");n.className="product-card";let a=document.createElement("div");if(a.className="product-image",e.sconto>0){let l=document.createElement("span");l.className="product-sconto",l.innerText=`${e.sconto}% di Sconto`,a.appendChild(l)}let r=document.createElement("form");r.action="ProductInfo",r.method="POST",r.id=`${e.id}`;let i=document.createElement("input");i.type="hidden",i.name="primaryKey",i.value=`${e.id}`,r.appendChild(i),a.appendChild(r);let c=document.createElement("img");c.src=e.immagine,c.alt=e.nome,c.onclick=function(){r.submit()},a.appendChild(c),n.appendChild(a);let o=document.createElement("div");o.className="product-info";let d=document.createElement("h2");if(d.className="product-info-name",d.innerText=`${e.nome}`,o.appendChild(d),e.sconto>0){let p=document.createElement("span");p.className="product-info-price-off";let s=e.prezzo*(1-e.sconto/100);p.innerText=`${s.toFixed(2)}€`,o.appendChild(p);let m=document.createElement("span");m.className="product-info-price",m.innerText=`${e.prezzo.toFixed(2)}€`,o.appendChild(m)}else{let u=document.createElement("span");u.className="product-info-price-off",u.innerText=`${e.prezzo.toFixed(2)}€`,o.appendChild(u)}let h=document.createElement("span");h.className="product-info-flavour",h.innerText=e.gusto,o.appendChild(h),n.appendChild(o);let g=document.createElement("button");g.innerHTML="Aggiungi al carrello",g.className="cartAdd",g.onclick=function(){optionsVarianti(`${e.idVariante}`)},n.appendChild(g),t.appendChild(n)})}function resetProducts(){let e=document.querySelectorAll("select");e.forEach(e=>{e.value=""}),genericFilter()}