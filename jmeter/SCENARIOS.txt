DOCUMENTAZIONE DETTAGLIATA SCENARI DI TEST JMETER
=================================================

Questa guida descrive in dettaglio i piani di test JMeter creati per l'e-commerce. Ogni scenario è mirato a stressare una specifica componente architetturale.

1. Scenario_A_Anonymous.jmx (Navigazione Utente Anonimo)
--------------------------------------------------------
- TIPO: Test Funzionale / Carico Leggero (Baseline)
- CONFIGURAZIONE:
  - **Threads (10)**: Simula 10 utenti contemporanei sul sito.
  - **Ramp-up (5s)**: Gli utenti arrivano gradualmente nell'arco di 5 secondi (2 utenti al secondo).
  - **Loop (1)**: Ogni utente esegue il percorso una sola volta.
- OBIETTIVO:
  Verificare che le pagine pubbliche siano accessibili e veloci in condizioni di traffico normale. Serve come "linea di base" per confrontare le performance sotto stress.
- COSA TESTA (Componenti Tecniche):
  - **Web Server (Tomcat)**: Capacità di servire contenuti statici (JSP compilate).
  - **ProductServlet**: Lettura semplice dal Database (SELECT per ID) senza lock o transazioni complesse.
  - **Connessione DB**: Verifica che il pool di connessioni sia attivo e funzionante.

2. Scenario_B_Registered.jmx (Flusso Acquisto Completo)
-------------------------------------------------------
- TIPO: Test Funzionale / Transazionale (End-to-End)
- CONFIGURAZIONE:
  - **Threads (5)**: Numero basso perché il test è complesso e serve a verificare la correttezza funzionale, non il carico.
  - **Ramp-up (10s)**: Ingresso lento per evitare errori di login concorrente durante il test funzionale.
  - **Loop (1)**: Un ciclo completo di acquisto per utente.
- OBIETTIVO:
  Assicurarsi che un utente possa completare l'intero processo di acquisto senza errori (Login -> Carrello -> Ordine).
- COSA TESTA (Componenti Tecniche):
  - **Session Management**: Persistenza dell'oggetto `Utente` e `Carrello` nella sessione HTTP.
  - **Integrità dei Dati**: Corretto passaggio di parametri tra le Servlet.
  - **OrdineServlet**: Creazione corretta dei record nelle tabelle `Ordine` e `DettaglioOrdine`.


4. Scenario_C_CheckoutStress.jmx (Checkout "Black Friday")
----------------------------------------------------------
- TIPO: Stress Test (DB Writes & Transaction Bound)
- CONFIGURAZIONE:
  - **Threads (10)**: Sembrano pochi, ma le operazioni di scrittura sono molto pesanti. 10 scritture concorrenti sono un carico significativo.
  - **Ramp-up (5s)**: Ingresso rapido per simulare il "click day" o un flash sale.
  - **Loop (5)**: Ogni utente ripete l'acquisto 5 volte, con un loop interno che riempie il carrello con 5 prodotti diversi.
- OBIETTIVO:
  Simulare il momento critico del pagamento durante un picco di vendite. L'obiettivo è far emergere errori di database o timeout.
- COSA TESTA (Componenti Tecniche):
  - **OrdineServlet (doPost)**: Il punto più critico dell'applicazione.
  - **Problema N+1**: Verifica se il salvataggio di un ordine con 10 prodotti esegue 1 query o 11 query (1 insert ordine + 10 insert dettagli).
  - **Database Locks**: Verifica se le scritture concorrenti bloccano la tabella `Ordine`, rallentando tutto il sistema.

6. Scenario_D_CartStress.jmx (Stress Carrello Puro)
---------------------------------------------------
- TIPO: Stress Test (Session Concurrency)
- CONFIGURAZIONE:
  - **Threads (50)**: Alta concorrenza sulla gestione delle sessioni.
  - **Ramp-up (10s)**: Carico rapido.
  - **Loop (50)**: Ogni utente aggiunge e rimuove prodotti 50 volte freneticamente.
- OBIETTIVO:
  Verificare la robustezza della gestione del carrello in memoria (Sessione HTTP).
- COSA TESTA (Componenti Tecniche):
  - **CarrelloServlet**: Logica di aggiunta/rimozione dalla lista `Cart` in sessione.
  - **Thread Safety**: Verifica se le operazioni concorrenti sulla stessa sessione (o sessioni diverse) causano corruzione dei dati o eccezioni (es. `ConcurrentModificationException`).
  - **Memory Leaks**: Verifica se gli oggetti rimossi dal carrello vengono effettivamente liberati dalla memoria.